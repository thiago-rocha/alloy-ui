AUI.add("aui-form-validator",function(r){var ao=r.Lang,y=r.Object,N=ao.isBoolean,G=ao.isDate,w=y.isEmpty,s=ao.isFunction,Y=ao.isObject,n=ao.isString,d=ao.trim,V=r.DOM._getRegExp,p="form-validator",E=".",C="",x="input,select,textarea,button",c="Invalid Date",H="|",m="blur",M="errorField",aa="input",F="submitError",k="validateField",B="validField",an="aria-required",aj="boundingBox",i="checkbox",g="container",ag="containerErrorClass",R="containerValidClass",P="error",ak="errorClass",am="extractRules",q="field",ae="fieldContainer",X="fieldStrings",ai="focus",ah="labelCssClass",W="message",b="messageContainer",O="name",U="radio",o="rules",Z="selectText",ad="showAllMessages",z="showMessages",L="stack",l="stackErrorContainer",a="strings",f="submit",t="type",ac="valid",T="validClass",D="validateOnBlur",S="validateOnInput",j=r.getClassName,al=j(p,P),v=j(p,P,g),h=j(p,ac),ab=j(p,ac,g),I=j(q),e=j(p,W),u=j(p,L,P),af='<div class="'+e+'" role="alert"></div>',Q='<label class="'+u+'"></label>';YUI.AUI.defaults.FormValidator={STRINGS:{DEFAULT:"Please fix this field.",acceptFiles:"Please enter a value with a valid extension ({0}).",alpha:"Please enter only alpha characters.",alphanum:"Please enter only alphanumeric characters.",date:"Please enter a valid date.",digits:"Please enter only digits.",email:"Please enter a valid email address.",equalTo:"Please enter the same value again.",iri:"Please enter a valid IRI.",max:"Please enter a value less than or equal to {0}.",maxLength:"Please enter no more than {0} characters.",min:"Please enter a value greater than or equal to {0}.",minLength:"Please enter at least {0} characters.",number:"Please enter a valid number.",range:"Please enter a value between {0} and {1}.",rangeLength:"Please enter a value between {0} and {1} characters long.",required:"This field is required.",url:"Please enter a valid URL."},REGEX:{alpha:/^[a-z_]+$/i,alphanum:/^\w+$/,digits:/^\d+$/,email:/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i,iri:/^([a-z]([a-z]|\d|\+|-|\.)*):(\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?((\[(|(v[\da-f]{1,}\.(([a-z]|\d|-|\.|_|~)|[!\$&'\(\)\*\+,;=]|:)+))\])|((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=])*)(:\d*)?)(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*|(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)|((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)|((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)){0})(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i,number:/^[+\-]?(\d+([.,]\d+)?)+$/,url:/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)*(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i},RULES:{acceptFiles:function(ar,aq,at){var ap=null;if(n(at)){var A=at.replace(/\./g,"").split(/,\s*|\b\s*/);A=r.Array.map(A,r.Escape.regex);ap=V("[.]("+A.join(H)+")$","i");}return ap&&ap.test(ar);},date:function(aq,ap,ar){var A=new Date(aq);return(G(A)&&(A!==c)&&!isNaN(A));},equalTo:function(aq,ap,ar){var A=r.one(ar);return A&&(d(A.val())===aq);},max:function(ap,A,aq){return(ao.toFloat(ap)<=aq);},maxLength:function(ap,A,aq){return(ap.length<=aq);},min:function(ap,A,aq){return(ao.toFloat(ap)>=aq);},minLength:function(ap,A,aq){return(ap.length>=aq);},range:function(aq,ap,ar){var A=ao.toFloat(aq);
return(A>=ar[0])&&(A<=ar[1]);},rangeLength:function(aq,ap,ar){var A=aq.length;return(A>=ar[0])&&(A<=ar[1]);},required:function(at,aq,au){var A=this;if(r.FormValidator.isCheckable(aq)){var ap=aq.get(O),ar=r.all(A.getFieldsByName(ap));return(ar.filter(":checked").size()>0);}else{return !!at;}}}};var K=YUI.AUI.defaults.FormValidator;var J=r.Component.create({NAME:p,ATTRS:{boundingBox:{setter:r.one},containerErrorClass:{value:v,validator:n},containerValidClass:{value:ab,validator:n},errorClass:{value:al,validator:n},extractRules:{value:true,validator:N},fieldContainer:{value:E+I},fieldStrings:{value:{},validator:Y},labelCssClass:{validator:n,value:"aui-field-label"},messageContainer:{getter:function(A){return r.Node.create(A).clone();},value:af},strings:{valueFn:function(){return K.STRINGS;}},rules:{getter:function(ap){var A=this;if(!A._rulesAlreadyExtracted){A._extractRulesFromMarkup(ap);}return ap;},validator:Y,value:{}},selectText:{value:true,validator:N},showMessages:{value:true,validator:N},showAllMessages:{value:false,validator:N},stackErrorContainer:{getter:function(A){return r.Node.create(A).clone();},value:Q},validateOnBlur:{value:true,validator:N},validateOnInput:{value:false,validator:N},validClass:{value:h,validator:n}},isCheckable:function(ap){var A=ap.get(t).toLowerCase();return(A===i||A===U);},EXTENDS:r.Base,prototype:{initializer:function(){var A=this;A.errors={};A._blurHandlers=null;A._inputHandlers=null;A._rulesAlreadyExtracted=false;A._stackErrorContainers={};A.bindUI();A._uiSetValidateOnBlur(A.get(D));A._uiSetValidateOnInput(A.get(S));},bindUI:function(){var A=this,ap=A.get(aj);var aq=ap.delegate(ai,function(ar){A._setARIARoles();aq.detach();},x);A.publish({errorField:{defaultFn:A._defErrorFieldFn},validField:{defaultFn:A._defValidFieldFn},validateField:{defaultFn:A._defValidateFieldFn}});ap.on({reset:r.bind(A._onFormReset,A),submit:r.bind(A._onFormSubmit,A)});A.after("extractRulesChange",A._afterExtractRulesChange);A.after("validateOnBlurChange",A._afterValidateOnBlurChange);A.after("validateOnInputChange",A._afterValidateOnInputChange);},addFieldError:function(ar,aq){var A=this,at=A.errors,ap=ar.get(O);if(!at[ap]){at[ap]=[];}at[ap].push(aq);},clearFieldError:function(ap){var A=this;delete A.errors[ap.get(O)];},eachRule:function(ap){var A=this;r.each(A.get(o),function(aq,ar){if(s(ap)){ap.apply(A,[aq,ar]);}});},findFieldContainer:function(ap){var A=this,aq=A.get(ae);if(aq){return ap.ancestor(aq);}},focusInvalidField:function(){var A=this,ap=A.get(aj),aq=ap.one(E+al);if(aq){if(A.get(Z)){aq.selectText();}aq.focus();}},getField:function(ap){var A=this;if(n(ap)){ap=A.getFieldsByName(ap);if(ap&&ap.length&&!ap.name){ap=ap[0];}}return r.one(ap);},getFieldsByName:function(aq){var A=this,ap=A.get(aj).getDOM();return ap.elements[aq];},getFieldError:function(ap){var A=this;return A.errors[ap.get(O)];},getFieldStackErrorContainer:function(ar){var A=this,ap=ar.get(O),aq=A._stackErrorContainers;if(!aq[ap]){aq[ap]=A.get(l);}return aq[ap];},getFieldErrorMessage:function(au,at){var av=this,ax=au.get(O),ap=av.get(X)[ax]||{},A=av.get(o)[ax],aw=av.get(a),ar={};if(at in A){var aq=r.Array(A[at]);r.each(aq,function(aA,az){ar[az]=[aA].join(C);});}var ay=(ap[at]||aw[at]||aw.DEFAULT);return ao.sub(ay,ar);},hasErrors:function(){var A=this;return !w(A.errors);},highlight:function(aq,ap){var A=this,ar=A.findFieldContainer(aq);A._highlightHelper(aq,A.get(ak),A.get(T),ap);A._highlightHelper(ar,A.get(ag),A.get(R),ap);},normalizeRuleValue:function(ap){var A=this;return s(ap)?ap.apply(A):ap;},unhighlight:function(ap){var A=this;A.highlight(ap,true);},printStackError:function(aq,ap,ar){var A=this;if(!A.get(ad)){ar=ar.slice(0,1);}ap.empty();r.each(ar,function(au,at){var av=A.getFieldErrorMessage(aq,au),aw=A.get(b).addClass(au);ap.append(aw.html(av));});},resetAllFields:function(){var A=this;A.eachRule(function(aq,ar){var ap=A.getField(ar);A.resetField(ap);});},resetField:function(aq){var A=this,ap=A.getFieldStackErrorContainer(aq);ap.remove();A.resetFieldCss(aq);A.clearFieldError(aq);},resetFieldCss:function(aq){var ap=this,ar=ap.findFieldContainer(aq);var A=function(au,at){if(au){r.each(at,function(av){au.removeClass(ap.get(av));});}};A(aq,[T,ak]);A(ar,[R,ag]);},validatable:function(aq){var A=this,ap=false,at=A.get(o)[aq.get(O)];if(at){var ar=A.normalizeRuleValue(at.required);ap=(ar||(!ar&&K.RULES.required.apply(A,[aq.val(),aq]))||at.custom);}return !!ap;},validate:function(){var A=this;A.eachRule(function(ap,aq){A.validateField(aq);});A.focusInvalidField();},validateField:function(ar){var A=this,aq=A.getField(ar);if(aq){var ap=A.validatable(aq);A.resetField(aq);if(ap){A.fire(k,{validator:{field:aq}});}}},_afterExtractRulesChange:function(ap){var A=this;A._uiSetExtractRules(ap.newVal);},_afterValidateOnInputChange:function(ap){var A=this;A._uiSetValidateOnInput(ap.newVal);},_afterValidateOnBlurChange:function(ap){var A=this;A._uiSetValidateOnBlur(ap.newVal);},_defErrorFieldFn:function(at){var A=this,aq,aw,au,ar,av,ap;ap=at.validator;aw=ap.field;A.highlight(aw);if(A.get(z)){av=aw;ar=A.getFieldStackErrorContainer(aw);au=aw.get("nextSibling");if(au&&au.get("nodeType")===3){aq=aw.ancestor();if(aq&&aq.hasClass(A.get(ah))){av=au;}}av.placeAfter(ar);A.printStackError(aw,ar,ap.errors);}},_defValidFieldFn:function(ap){var A=this;var aq=ap.validator.field;A.unhighlight(aq);},_defValidateFieldFn:function(aq){var ap=this;var ar=aq.validator.field;var at=ap.get(o)[ar.get(O)];r.each(at,function(ax,av){var aw=K.RULES[av];var au=d(ar.val());ax=ap.normalizeRuleValue(ax);if(s(aw)&&!aw.apply(ap,[au,ar,ax])){ap.addFieldError(ar,av);}});var A=ap.getFieldError(ar);if(A){ap.fire(M,{validator:{field:ar,errors:A}});}else{ap.fire(B,{validator:{field:ar}});}},_highlightHelper:function(ar,A,ap,aq){if(ar){if(aq){ar.removeClass(A).addClass(ap);}else{ar.removeClass(ap).addClass(A);}}},_extractRulesFromMarkup:function(aE){var aC=this,ax=aC.get(aj).getDOM(),ap=ax.elements,aw=y.keys(K.RULES),aB=aw.join("|"),aA=V("aui-field-("+aB+")","g"),av,ar,aF=[],A=function(aH,aG){aF.push(aG);
};for(av=0,ar=ap.length;av<ar;av++){var aq=ap[av],aD=aq.name;aq.className.replace(aA,A);if(aF.length){var at=aE[aD],au,ay;if(!at){at={};aE[aD]=at;}for(au=0,ay=aF.length;au<ay;au++){var az=aF[au];if(!(az in at)){at[az]=true;}}aF.length=0;}}aC._rulesAlreadyExtracted=true;},_onFieldInput:function(ap){var A=this;A.validateField(ap.target);},_onFormSubmit:function(ap){var A=this;var aq={validator:{formEvent:ap}};A.validate();if(A.hasErrors()){aq.validator.errors=A.errors;A.fire(F,aq);ap.halt();}else{A.fire(f,aq);}},_onFormReset:function(ap){var A=this;A.resetAllFields();},_setARIARoles:function(){var A=this;A.eachRule(function(aq,ar){if(aq.required){var ap=A.getField(ar);if(ap&&!ap.attr(an)){ap.attr(an,true);}}});},_uiSetExtractRules:function(ap){var A=this;if(ap){A._extractRulesFromMarkup(A.get(o));}},_uiSetValidateOnInput:function(aq){var A=this,ap=A.get(aj);if(aq){if(!A._inputHandlers){A._inputHandlers=ap.delegate(aa,A._onFieldInput,x,A);}}else{if(A._inputHandlers){A._inputHandlers.detach();}}},_uiSetValidateOnBlur:function(aq){var A=this,ap=A.get(aj);if(aq){if(!A._blurHandlers){A._blurHandlers=ap.delegate(m,A._onFieldInput,x,A);}}else{if(A._blurHandlers){A._blurHandlers.detach();}}}}});r.each(K.REGEX,function(ap,A){K.RULES[A]=function(ar,aq,at){return K.REGEX[A].test(ar);};});r.FormValidator=J;},"@VERSION@",{requires:["aui-base","aui-event-input","escape","selector-css3"],skinnable:false});